buildscript {
  repositories { jcenter() }

  dependencies {
    classpath 'org.anarres.gradle:gradle-sablecc-plugin:[1.0.4,)'
  }
}

subprojects {
  apply plugin: 'maven'
  apply plugin: 'java'

  //  apply plugin: 'checkstyle'
  //  apply plugin: 'pmd'
  //  apply plugin: 'findbugs'
  //  apply plugin: 'Site'

  uploadArchives {
    repositories {
      mavenDeployer {
        repository(url: "https://maven.openflexo.org/artifactory/openflexo-snapshot/")
      }
    }
  }

  compileJava.options.encoding = 'UTF-8'

  tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
  }

  repositories {
    jcenter()
    maven { url "https://maven.openflexo.org/artifactory/openflexo-release/" }
    maven { url "https://maven.openflexo.org/artifactory/openflexo-snapshot/" }
    maven { url "https://maven.openflexo.org/artifactory/openflexo-deps/" }
  }

  dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.+'
  }

  test {
    testLogging {
      // Show that tests are run in the command-line output
      events 'passed' //'started',
      //showStandardStreams = true
    }
  }

  if (JavaVersion.current().isJava8Compatible()) {
    allprojects {
      tasks.withType(Javadoc) {
        options.addBooleanOption('Xdoclint:none', true)
      }
    }
  }
}

allprojects {
  apply plugin: 'project-report'

  group='org.openflexo'
  version = '1.9.0-SNAPSHOT'

  htmlDependencyReport {
    projects = project.allprojects
  }
}
